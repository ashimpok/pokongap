<!DOCTYPE html>

<html>
<head>
    <title>myCISI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="assets/styles/jquery.mobile/jquery.mobile.structure.min.css" type="text/css"/>
    <link rel="stylesheet" href="assets/styles/jquery.mobile/jquery.mobile.min.css" type="text/css"/>
    <link href="assets/styles/smoothness/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="assets/styles/site.css" rel="stylesheet" type="text/css" />
    
    <script src="assets/scripts/jquery.min.js" type="text/javascript"></script>
    <script src="assets/scripts/jquery-ui.min.js" type="text/javascript"></script>
    <script src="assets/scripts/jquery.mobile.min.js" type="text/javascript"></script>
    <script src="assets/scripts/jquery.validate.min.js" type="text/javascript"></script>
    <script src="assets/scripts/application.js" type="text/javascript"></script>
    <script src="assets/scripts/env.js" type="text/javascript"></script>
        
    <script type="text/javascript">
        $(document).bind(Environment.InitName, function () {
            Environment.PageSetup();
            
            $("#btnLogin").click(function () {
                                            
                var loginRequest = new MobileLoginRequest();
                loginRequest.UserName = $("#email").val();
                loginRequest.Password = $("#password").val();
                
                Environment.PostRequest(loginRequest, onLoginSuccess, onLoginError);
                return false;
            });
        });

        //$('#frmLogin').validate({
        //    submitHandler: function (form) {
        //        alert("Call login action");
        //    }
        //});

        function onLoginSuccess(data, Status) {
            ApplicationShowMessage('Logged on', 'Thank you');
            //data = $.trim(data);            
        }

        function onLoginError(data, Status, err) {
            ApplicationShowError(err);
            ApplicationShowError('Login failed', 'Please try again.');
        }
    </script>
</head>
<body>
    <!-- Mainpage -->
    <div id="#mainpage" data-role="page">
	    <div data-role="header">
		    <h1>myCISI Portal</h1>
      </div><!-- /header -->

	    <div data-role="content">
            <h3>Your personalized travel portal</h3>
            
            <ul data-role="listview" data-inset="true">
                <li data-role="list-divider">Access your acocunt</li>
	            <li><a href="#login">Login</a></li>

                <li data-role="list-divider">Offline content</li>
                <li><a href="offline_dashboard.html">View offline content</a></li>
            </ul>
	    </div><!-- /content -->
    </div><!-- /Mainpage -->

    <!-- Login page-->
    <div id="login" data-role="page" data-add-back-btn="true">
         <div data-role="header">
		    <h1>myCISI Login</h1>            
        </div><!-- /header -->

        <div data-role="content">
            <div class="ui-body ui-body-c">
            <form id="frmLogin" action="">
                <div data-role="fieldcontain">
	                <label for="email">
                        <em>* </em> Email:</label>
	                <input type="text" name="email" id="email" value="" class="required email"/>
                </div>

                <div data-role="fieldcontain">
	                <label for="password">
                        <em>* </em>Password:</label>
	                <input type="password" name="password" id="password" value="" class="required"/>
                </div>

                <div>
                    <input id="btnLogin" type="submit" value="Login"/>
                </div>
            </form>
            </div>
        </div>

         <div data-role="footer" data-position="fixed">
		    <div data-role="navbar" data-iconpos="top">
		        <ul>
			        <li><a data-icon="home" href="#register">Register</a></li>
			        <li><a data-icon="home" href="#register">Forgot password</a></li>			        
		        </ul>
	        </div><!-- /navbar -->
        </div><!-- /footer -->
    </div>
    <!-- /Login page-->

    <!-- Forget/Reset page-->
    <div id="register" data-role="page" data-add-back-btn="true">
         <div data-role="header">
		    <h1>Register</h1>
        </div><!-- /header -->

        <div data-role="content">
            <div class="ui-body ui-body-c">
            <form id="frmForgetReset">
                <div data-role="fieldcontain">
	                <label for="First name">
                        <em>* </em> First name:</label>
	                <input type="text" name="firstname" id="firstname" value="" class="required"/>
                </div>

                <div data-role="fieldcontain">
	                <label for="username">
                        <em>* </em> Last name:</label>
	                <input type="text" name="lastname" id="lastname" value="" class="required"/>
                </div>

                <div data-role="fieldcontain">
	                <label for="birthdate">
                        <em>* </em>Birth date:</label>
                    <input name="birthdate" id="birthday" value="" class="required date-birth" />
                </div>

                <div>
                    <button class="btnForgetReset" type="submit">Register</button>
                </div>
            </form>
            </div>
        </div>
    </div>
    <!-- /Forget/Reset page-->
</body>
</html>
